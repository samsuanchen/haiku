<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Forth Haiku Editor</title>
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<link rel="stylesheet" type="text/css" href="./Forth Haiku/Forth Haiku Editor_files/forthsalon.css">
<meta name="viewport" content="width=600">
<meta name="viewport" content="initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head><body onload="init()" bgcolor="#888"><div class="section">

<div style="display:flex">
<textarea id="pre_code" hidden=1>
: 2pi pi pi + ;
: 2/ 2 / ; : 1+ 1 + ;
\ : cx .5 ; : cy .5 ; \ p,q 原點
\ cx,cy 應可預設為點滑鼠定原點
: p x cx - ; : q y cy - ;
: 角 ( -- 角 ) \ p,q 到 原點 角度
\ 0 表 -pi   1 表 pi
  q p atan2 pi + 2pi / ;
: 距 ( -- 距 ) \ p,q 到 原點 距離
  p p * q q * + sqrt ;
: 內 ( x v -- b ) < ; \ x<v 區
: 外 ( x v -- b ) > ; \ x>v 區
: 間 ( x L U -- b ) \ x 在 L U 間
  >r over r> < >r > r> and ;
: 圓 ( v -- b ) 距 > ; \ 距<v 區
: 洞 ( v -- b ) 距 < ; \ 距>v 區
: 線 ( r v -- b )
  - abs .01 < ; \ f(x,y,t)=0
: 圈 距 線 ;
: 反 1 swap - ;
: 暈 - .2 ** 反 ; \ f(x,y,t)=0
: 層 dup >r * dup 1 mod - r> 1 - / ;
: 摺 * 1 mod ;
: 摺格 ( x y n -- v )
  dup >r 摺 swap r> 摺 * ;
: 層格 ( x y n -- v )
  dup >r 層 swap r> 層 * ;
: 移 ( x n -- v ) - ; \ x左移n
: 放 ( x n -- v ) * ; \ x區放n倍
: 縮 ( x n -- v ) / ; \ x區縮n倍
: 絕對 ( x -- v ) abs ; \ 取x絕對值
: 負 ( x -- v ) negate ; \ 取x負值
: 方 ( r -- b ) \ 邊長2*r方
  p abs over < swap q abs > * ;
</textarea>
<div style="flex:1" width=256 height=256 name="haiku" onclick="onClick()" onmousemove="onMouseMove()">
   <textarea style="width: 256; height:256" onkeyup="onKeyUp()" id="src_code" rows="30">\ cx,cy 應為畫面上滑鼠所點位置的座標
\ 反斜線空格後 文字忽略 作註解
\ 左右刮號間 文字也忽略 作註解
( A. 圓圈洞 與 紅綠藍透
  .1 圓 \ 半徑 0.1 圓 紅色面 r
  .2 圈 \ 半徑 0.2 圈 綠色面 g
  .3 洞 \ 半徑 0.3 洞 藍色面 b
  .4 圓 \ 半徑 0.4 圓 透視面 a
\ 建議: 數值 測試區間 0.0 到 0.5 )
( B. 距角內外間反
\ 距 \ 原點 到 任意點 距離
\ 角 \ 原點 到 任意點 角度
  距 .2 內 \ 半徑 0.2 圓 紅
  距 .3 外 \ 半徑 0.3 洞 綠
  角 0 .6 間 \ 角度 -180 到 36 藍
  .4 洞 反 \ 半徑 0.4 圓 透
\ 註1 洞 反 即是 圓, 圓 反 即是 洞
\ 註2 紅藍重疊變 紫, 綠藍重疊變 青
\ 建議: 距 測試區間 0.0 到 0.5
\ 建議: 角 測試區間 0.0 到 1.0 )
( C. xypq 絕對值
\ x 左右 0 到 1
\ y 下上 0 到 1
\ p 左右 -0.5 到 0.5
\ q 下上 -0.5 到 0.5
p -.2 .2 間
q -.2 .2 間
  .4 方 )
\ 距 9 層 反 \ 9圈漸層
\ 距 9 摺 \ 9圈
\ 距 t 移 9 摺 \ 每秒9圈放射
\ 角 9 層 
\ x 5 摺
\ x 10 層   y 10 層 + 2 縮
\ x y + 2 縮 10 層 
\ x 1 + y - 2 縮 10 層 + 2 縮
\ : t t 5 縮 ; \ t 慢 5 倍
\ : x x t 移 ; \ x 原點 隨 t 移
\ : x x 2pi 放 3 放 ; \ x 區放大
\ : y y .5 移 ; \ y 原點 移到中間
\ : y y 4 放 ; \ y 區放大 4 倍
\ : f x sin ; \ f 為 x 的 正旋波
\ y f 暈 \ y 等於 f 的暈
\ y f 線 \ y 等於 f 的線
\ 角 t 移 3 摺 \ 3葉扇正轉
\ 角 t 負 移 3 摺 \ 3葉扇反轉
: 風扇
  角 t - 4 摺 \ 紅 4葉風扇正轉
  0 \ 無 綠
  0 \ 無 藍
  距 7 層 反  .45 圓 *  \ 透視
;   風扇</textarea>
   <a name="animated" style="display: none;">a</a>
</div>
<!--
<div style="flex:1" width=256 height=256 name="haiku" onclick="onClick()" onmousemove="onMouseMove()" class="crosshair">
   <textarea style="width: 256; height:256" onkeyup="onKeyUp()" id="src_code" rows="30"></textarea>
</div>
<div style="flex:1" width=256 height=256 name="haiku" onclick="onClick()" onmousemove="onMouseMove()" class="crosshair">
   <textarea style="width: 256; height:256" onkeyup="onKeyUp()" id="src_code" rows="30"></textarea>
</div>
<div style="flex:1" width=256 height=256 name="haiku" onclick="onClick()" onmousemove="onMouseMove()" class="crosshair">
   <textarea style="width: 256; height:256" onkeyup="onKeyUp()" id="src_code" rows="30"></textarea>
</div>
-->
</div>

<div id="mous"> 000, 000 clicked 000, 000</div>
<span id="tag_area">style:short | chars:93 | words:28 | lines:4,8,6,10</span>

<script type="text/javascript" src="./Forth Haiku/Forth Haiku Editor_files/haiku.js"></script>
<script type="text/javascript">
var x,y,click={x:0,y:0};
var e=0.005;
function onMouseMove(){
  x=event.pageX/256+e;
  y=(512-event.pageY)/256+e;
  if(x>=0 && x<=1 && y>=0 && y<=1)
  	showMouse(x,y);
//	update_tags();
}
function showMouse(x,y){
  mous.innerHTML=d4(x)+','+d4(y)+' click at '+d4(click.x)+','+d4(click.y);
}
function d4(n){
  if(n>e){
    var v=n.toString().substr(0,4);
    return ' '+v+"00".substr(0,4-v.toString().length);
  }
  return " 0.00"
}
function onClick(){
  if(x>=0 && x<=1 && y>=0 && y<=1){
	click={x:x,y:y};
	update_tags();
  }
}
function init() {
  var s=localStorage.getItem('myHaikuSrc');
  if(s)
    src_code.value=s;
  var c=localStorage.getItem('myClick');
  if(c)
    click=JSON.parse(c);
  showMouse(x,y);
  animate_haikus(function() {
  });
}
function onKeyUp(){
  update_tags();
}
function update_tags() {
  var s=src_code.value;
  if(s!==localStorage.getItem('myHaikuSrc'))
    localStorage.setItem('myHaikuSrc',s);
  var c=JSON.stringify(click);
  if(c!==localStorage.getItem('myClick'))
    localStorage.setItem('myClick',c);
  tag_area.innerHTML = code_tags(s).join(' | ');
}
</script></div></body></html>